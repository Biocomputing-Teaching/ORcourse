%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Beamer Presentation
% LaTeX Template
% Version 1.0 (10/11/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND THEMES
%----------------------------------------------------------------------------------------

\documentclass[c]{beamer}
%\documentclass[notes]{beamer}
\setbeamertemplate{note page}[show only notes]
\input{OR_common.tex}

\usepackage{array}
\newcolumntype{C}{@{}c@{}}
\newcommand{\bottombox}[1]{\makebox[2em][r]{#1}\hspace*{\tabcolsep}\hspace*{2em}}%
\newcommand{\innerbox}[2]{%
    \begin{tabular}[b]{c|c}
       \rule{2em}{0pt}\rule[-2ex]{0pt}{5ex} & \makebox[2em]{#2} \\\cline{2-2}
       \multicolumn{2}{r}{{#1}\hspace*{1.5\tabcolsep}\hspace*{2em}\rule[-2ex]{0pt}{5ex}}
    \end{tabular}}
\renewcommand{\arraystretch}{1.25}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title[Introduction]{Unit 6. Integer Programming}

\author{Jordi Villà i Freixa}
\institute[FCTE]{
Universitat de Vic - Universitat Central de Catalunya \\
Study Abroad. Operations Research\\
\medskip
\textit{jordi.villa@uvic.cat\\\url{https://mon.uvic.cat/cbbl}\\\tiny{last updated: \today}}
}
\date{December 3rd-10th, 2025}
\logo{\includegraphics[width=.1\textwidth]{FCTE}}
\begin{document}

\begin{frame}
\titlepage
\end{frame}

\input{Refs.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
\frametitle{Learning outcomes}
\begin{itemize}
  \item Getting familiar with the use of integer programming
  \item Solving integer programming problems
\end{itemize}
\end{frame}

\section{The concept}
\begin{frame}{The concept}
\begin{itemize}
  \item Problems in which the feasible set is composed of only integer values.
  \item The feasible set is neither continuous nor convex.
  \item NP-hard problems in general.
  \item Integer problems that have a network structure are easy to solve using the Simplex method (assignment and matching problems, transportation and transshipment problems, and network flow problems always produce integer results, provided that the problem bounds are integers).
  \item Rounding can be effective in some problems and clearly not in others:
  \begin{itemize}
    \item not the same tires than aircrafts!
    \item values 0/1 for variable: zero-one or binary integer programming (produce or not produce cars in this factory)
    \item mixed integer programming problems
  \end{itemize} 
\end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Integer programming (knapsack problem)}

 Example: The \textbf{knapsack problem} is a classic integer programming problem where items with different weights and values must be selected to maximize total value while staying within a weight capacity constraint.

  \begin{equation*}
    \begin{aligned}
      \text{maximize } \quad & \sum_{j=1}^{n} c_j x_j \\
      \text{subject to }\quad &
      \begin{array}{rcl}
        \sum_{j=1}^n a_{ij} x_j \leq b_i&i=1,2,\ldots,m&  \\
        x_j > 0 &j=1,2,\ldots,n&\\
        x_j \quad \mathrm{integer} & \mathrm{for\,some\,or\,all\,} & j=1,2,\ldots,n
      \end{array}
    \end{aligned}
  \end{equation*}
  In the 0-1 version of the knapsack problem, each item can either be included (1) or excluded (0) from the knapsack.

\end{frame}
\subsection{example}
\begin{frame}[allowframebreaks]{General integer programming problems}

Example: A manufacturer has 300 person-hours available this week and 1,800 units of raw material. These resources can be used to produce two products, A and B. The requirements and the profit for each item are given in the table below:

\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\textbf{Product} & \textbf{Person-Hours} & \textbf{Raw Material} & \textbf{Profit (\$)} \\
\hline
A & 150 & 300 & 600 \\
B & 10 & 400 & 100 \\
\hline
\end{tabular}
\end{center}
\framebreak 
  The manufacturer wants to determine how many units of each product to produce in order to maximize profit, given the constraints on person-hours and raw material. Since the products cannot be produced in fractional units, this is an integer programming problem.
Let $x_1$ and $x_2$ represent the \textit{integer number of units} of products A and B, respectively. We can formulate this problem as the following integer linear programming model:

\[
\begin{array}{c}
\text{maximize} \quad z = 600x_1 + 100x_2\\
\text{subject to}
\begin{cases}
150x_1 + 10x_2 \leq 300\\
300x_1 + 400x_2 \leq 1800\\
x_1, x_2 \geq 0 \quad \text{and integer}
\end{cases}
\end{array}
\]

    \begin{center}
      \includegraphics[width=0.4\linewidth]{../figures/IntegerProgramming.png}
    \end{center}
    Graphical representation of a typical 2 dimensional integer programming\cite{carter_operations_2019}.
  \end{frame}

\section{IP examples}

  \begin{frame}
    \frametitle{Integer problem examples}
  
    \begin{itemize}
      \item Capital budgeting: deciding between a collection of investiments
      \item Warehouse location: in modelling distribution systems, we should decide about tradeoffs between transportation costs and costs for operating distributions centers
      \item Scheduling: students-faculty-classrooms allocations, vehicle dispatching, etc (see next slide)
    \end{itemize}
  
  \end{frame}
\subsection{Zero-One Scheduling Problem}
\begin{frame}
  \frametitle{\href{https://fastercapital.com/content/Optimization--Solving-Complex-Problems-with-Zero-One-Integer-Programming.html}{Zero-One (0-1) scheduling problem}}

  {\bf Airline crew scheduling problem}: The airlines first design a flight schedule composed of a large number of {\em flight legs} (specific flight on a specific piece of equipment, such as a 747 from New York to Chicago departing at 6:27 a.m.). A flight crew is a complete set of people, including pilots, navigator, and flight attendants who are trained for a specific airplane. A work schedule or rotation is a collection of flight legs that are feasible for a flight crew, and that normally terminate at the point of origin. Variables $x_{ij}$ have value 1 if flight leg $i$ is assigned to crew $j$. All flight legs should be covered at minimum total cost. 
  \\[10pt]
  Also called a {\em set-partitioning problem}
    \end{frame}

\begin{frame}
  \begin{equation*}
    \begin{aligned}
      \text{minimize } \quad & \sum_{j=1}^{n} c_j x_j \\
      \text{subject to }\quad &
      \begin{array}{rcl}
        \sum_{j=1}^n a_{ij} x_j= 1&i=1,2,\ldots,m&  \\
        x_j = {0,1} &j=1,2,\ldots,n
      \end{array}
    \end{aligned}
  \end{equation*}

\end{frame}
\subsection{Travelling Salesman Problem}
\begin{frame}
  \frametitle{Travelling salesman problem}

  \begin{Exercise}
    Consider the travelling salesman problem. Starting from his home, a salesman wishes to visit each of $(n-1)$ other cities and return home at minimal cost. He must visit each city exactly once and the cost to travel from city $i$ to $j$ is $c_{ij}$. Let $x_{ij}$ be 1 or 0 depending on the fact that he goes or not from city $i$ to city $j$
    \begin{itemize}
      \item formulate the optimization problem
      \item how to avoid disjoint tours?
    \end{itemize}
  \end{Exercise}

\end{frame}

%-------------------------------------------------
\begin{frame}
  \frametitle{Travelling Salesman Problem (TSP): Variables and Objective}

 Decision variables:
  \[
    x_{ij} =
    \begin{cases}
      1 & \text{if the salesman travels from city $i$ to city $j$}\\
      0 & \text{otherwise}
    \end{cases}
  \]

Objective function (minimise total cost):
  \[
    \min \sum_{i=1}^{n} \sum_{j=1,\, j\neq i}^{n} c_{ij} x_{ij}
  \]

\end{frame}

%-------------------------------------------------
\begin{frame}
  \frametitle{Basic constraints}

  Each city must be left exactly once and entered exactly once:

  \[
    \sum_{j=1,\, j\neq i}^{n} x_{ij} = 1 \quad \forall i = 1,\ldots,n
  \]

  \[
    \sum_{i=1,\, i\neq j}^{n} x_{ij} = 1 \quad \forall j = 1,\ldots,n
  \]

  \[
    x_{ij} \in \{0,1\} \quad \forall i, j
  \]

  These constraints guarantee cycles, but still allow \textit{subtours} (disconnected tours).

\end{frame}

%-------------------------------------------------
\begin{frame}
  \frametitle{What are subtours?}

  Even if every city has one incoming and one outgoing arc, the model may produce
  several disconnected cycles:

  \bigskip

  Example of an infeasible solution with subtours:
  \begin{itemize}
    \item Tour 1: $1 \to 2 \to 3 \to 1$
    \item Tour 2: $4 \to 5 \to 6 \to 4$
  \end{itemize}

  \medskip

  We must restrict the model so that there is exactly one single tour.

\end{frame}

%-------------------------------------------------
\begin{frame}
  \frametitle{Subtour elimination constraints (SEC)}

  For any subset of cities $S \subset \{1,\ldots,n\}$:

  \[
    \sum_{i \in S} \sum_{j \in S} x_{ij} \le |S| - 1
  \]

  These are known as \textbf{subtour elimination constraints (SEC)}.

  \bigskip

  They prevent a subset of cities from forming an independent cycle.
  
  \medskip
  \textit{Drawback:} The number of such sets $S$ is exponential.

\end{frame}

%-------------------------------------------------
\begin{frame}
  \frametitle{Alternative formulation: MTZ (Miller--Tucker--Zemlin)}

  See also this \href{https://how-to.aimms.com/Articles/332/332-Miller-Tucker-Zemlin-formulation.html}{HowTo} web page.

  Introduce additional continuous variables $u_i$ (visiting order):

  \[
    u_i - u_j + n\, x_{ij} \le n - 1
    \quad \forall i \neq j,\ i,j = 2,\ldots,n
  \]

  with:

  \[
    1 \le u_i \le n \quad \forall i = 2,\ldots,n
  \]

  These constraints \textbf{eliminate subtours} by enforcing a consistent visiting order.

  \bigskip
  \textit{Advantage:} polynomial number of constraints.

\end{frame}

%-------------------------------------------------
\begin{frame}
  \frametitle{Complete model (summary)}

  \[
    \min \sum_{i=1}^{n}\sum_{j\neq i} c_{ij}x_{ij}
  \]

  subject to:
  \[
    \sum_{j\neq i} x_{ij} = 1 \quad \forall i
  \]
  \[
    \sum_{i\neq j} x_{ij} = 1 \quad \forall j
  \]
  \[
    u_i - u_j + n x_{ij} \le n-1 \quad \forall i \neq j
  \]
  \[
    x_{ij} \in \{0,1\}, \quad u_i \ge 0
  \]

  \bigskip
  This formulation guarantees a single tour visiting all cities.

\end{frame}


\begin{frame}{Applications of the Traveling Salesman Problem (TSP)}
  \begin{itemize}
      \item \textbf{Logistics and Supply Chain:} Delivery route optimization for couriers (e.g., FedEx, UPS), and minimizing travel distances for food delivery services (e.g., Glovo).
      \item \textbf{Manufacturing:} Efficient routing of robotic arms in assembly lines, and optimal sequencing of drilling or cutting operations in circuit board manufacturing.
      \item \textbf{Telecommunications:} Designing optimal fiber optic or cable routing networks, and planning routes for signal maintenance teams.
      \item \textbf{Travel and Tourism:} Planning shortest tour routes for sightseeing in cities, and organizing efficient itineraries for travel agencies.
      \item \textbf{Biology and Genetics:} DNA sequencing, where TSP helps align fragments of genetic material.
      \item \textbf{Other Examples:} School bus routing, and urban planning and traffic management.
  \end{itemize}
\end{frame}

\section{Solving integer problems}

\begin{frame}
  \frametitle{Solving Integer problems}

  Simplex is not useful to solve, in general, integer problems. Instead, many other techniques have been proposed:
  \begin{itemize}
    \item Enumeration techniques, including the branch-and-bound procedure;
    \item cutting plane techniques; and 
    \item group-theoretic techniques,
  \end{itemize}

  as well as several composite techniques
\end{frame}
\subsection{Branch and Bound}
  \begin{frame}
    \begin{center}
      \includegraphics[width=0.4\linewidth]{../figures/BranchandBound.png}
    \end{center}
    Separation into two subproblems in the Branch-and-Bound method\cite{carter_operations_2019}.
  \end{frame}

\begin{frame}
  \begin{Exercise}
    Using the graphical representation and the branch-and-bound procedure, solve this integer program:
    \begin{equation*}
      \begin{aligned}
        \text{maximize } \quad & z=x_1+5x_2 \\
        \text{subject to }\quad &
        \begin{array}{rcl}
          -4x_1+3x_2\leq 6&&  \\
          3x_1+2x_2\leq 18&&  \\
          x_1,x_2 \geq 0 & \mathrm{and\,integer}
        \end{array}
      \end{aligned}
    \end{equation*}
  \end{Exercise}
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{LP Relaxation (Graphical Solution)}

Relax the integrality constraints: $x_1, x_2 \geq 0$ continuous.
\[
-4x_1 + 3x_2 \le 6 \;\;\Rightarrow\;\; x_2 \le 2 + \frac{4}{3}x_1
\]
\[
3x_1 + 2x_2 \le 18 \;\;\Rightarrow\;\; x_2 \le 9 - \frac{3}{2}x_1
\]
Intersection of the two lines:
\[
\begin{cases}
-4x_1 + 3x_2 = 6 \\
3x_1 + 2x_2 = 18
\end{cases}
\Rightarrow
x_1 = \frac{42}{17}, \; x_2 = \frac{90}{17}
\]
Evaluate the objective function:
\[
z = x_1 + 5x_2 = \frac{492}{17} \approx 28.94
\]
\[
\Rightarrow \textbf{LP optimum: } \left(\frac{42}{17}, \frac{90}{17}\right)
\]
This solution is \textbf{not integer} $\Rightarrow$ Branch and Bound is needed.
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Branch and Bound – First Branching}
We branch on the fractional variable:
\[
x_2 = \frac{90}{17} \approx 5.29
\]
Two subproblems:
\[
\text{(A) } x_2 \le 5 \qquad\qquad
\text{(B) } x_2 \ge 6
\]
\textbf{Branch B:} If $x_2 = 6$ then
\[
3x_1 + 12 \le 18 \Rightarrow x_1 \le 2
\]
But also
\[
-4x_1 + 18 \le 6 \Rightarrow x_1 \ge 3
\]
Contradiction $\Rightarrow$ \textbf{Branch B is infeasible}. Proceed with \textbf{Branch A: $x_2 \le 5$}

\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Branch A: LP relaxation}
Add constraint $x_2 \le 5$.
\[
3x_1 + 2(5) = 18 \Rightarrow x_1 = \frac{8}{3}
\]
LP solution:
\[
(x_1, x_2) = \left(\frac{8}{3}, 5\right)
\]
\[
z = \frac{8}{3} + 25 = \frac{83}{3} \approx 27.67
\]
Still fractional → branch on $x_1$:
\[
\text{(A1) } x_1 \le 2 \qquad\qquad
\text{(A2) } x_1 \ge 3
\]
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Node A1: $x_1 \le 2$}
Try point $(x_1,x_2) = (2,4)$ (largest integer feasible):
Check constraints:
\[
-4(2) + 3(4) = 4 \le 6 \quad \checkmark
\]
\[
3(2) + 2(4) = 14 \le 18 \quad \checkmark
\]
\[
z = 2 + 5(4) = 22
\]
$\Rightarrow$ Feasible integer solution found:
\[
z = 22 \Rightarrow \textbf{Current best (incumbent)}
\]
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Node A2: $x_1 \ge 3$}
For $x_1 = 3$:
\[
3(3) + 2x_2 = 18 \Rightarrow x_2 = 4.5
\]
LP solution:
\[
(x_1, x_2) = (3,\,4.5)
\quad\Rightarrow\quad
z = 3 + 5(4.5) = 25.5
\]
This is fractional → branch on $x_2$:
\[
\text{(A2a) } x_2 \le 4 \qquad\qquad
\text{(A2b) } x_2 \ge 5
\]
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Node A2b: $x_2 \ge 5$}
Earlier we saw:
\[
x_2 \ge 5 \Rightarrow x_1 \le \frac{8}{3}
\]
But here we have:
\[
x_1 \ge 3
\]
Contradiction $\Rightarrow$ \textbf{Node A2b is infeasible (pruned)}
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Node A2a: $x_2 \le 4$}
Try the best integer point $(x_1,x_2) = (3,4)$:
\[
-4(3) + 3(4) = 0 \le 6 \quad \checkmark
\]
\[
3(3) + 2(4) = 17 \le 18 \quad \checkmark
\]
\[
z = 3 + 5(4) = \boxed{23}
\]
Update:
\[
\text{Best solution } = (3,4), \quad z = 23
\]
All other branches are either infeasible or have lower bounds ⇒ STOP.
\end{frame}

%-------------------------------------------------
\begin{frame}
\frametitle{Final Answer}
\[
\boxed{x_1 = 3,\;\; x_2 = 4}
\]
\[
\boxed{z_{\max} = 23}
\]
\textbf{Summary:}
\begin{itemize}
  \item LP relaxation value: $z = 28.94$ (not integer)
  \item Branch-and-bound explored feasible regions
  \item Best integer point: $(3,4)$
\end{itemize}
\bigskip
\[
\boxed{\text{Optimal integer solution: } z = 23}
\]
\end{frame}


\input{Biblio.tex}
%----------------------------------------------------------------------------------------

\end{document}
